{% extends 'standard_base_template.html' %}

{% block title %} Wypełnij obecność {% endblock %}

{% block styles %}
    {{ block.super }}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/gradient_anim.css' %}">
    <link rel="stylesheet" href="{% static 'css/fixed_settings.css' %}">
    <link rel="stylesheet" href="{% static 'css/flex_form.css' %}">
    <link rel="stylesheet" href="{% static 'filler/css/index.css' %}">
{% endblock %}

{% block external_scripts %}
    {{ block.super }}
{% endblock %}

{% block home_icon %}
    <a href="{% url 'filler:start' %}"><i class="fas fa-file-signature"></i></a>
{% endblock %}

{% block content %}
    {% include 'filler/non_field_error_alerts.html' with form=filler_form %}

    <div class="form_wrapper">
        <form id="flex_form" method="post" enctype="multipart/form-data" action="{% url 'filler:start' %}" novalidate>
            {% csrf_token %}
            {% include 'filler/form_with_single_file_field.html' with form=filler_form file_field_name='teams_file' %}
            <input type="submit" class="form__submit btn btn-lg" value="Oszczędź czas">
        </form>
    </div>

    <div class="settings_wrapper">
        <div class="settings">
            <a href="{% url 'filler:settings' %}"><i class="fas fa-sliders-h"></i></a>
        </div>
    </div>
{% endblock %}

{% block script %}
    {{ block.super }}

    gsap.timeline()
        .delay(0.5)
        .add('form')
        .from('.alert', {duration: 1, y: 200, opacity: 0, ease: "back.out(1.7)"}, 'form')
        .from('#flex_form', {duration: 0.7, y: 200, opacity: 0, ease: "circ.out"}, 'form')
        .from('.form__submit', {duration: 2, y: 200, opacity: 0, ease: "elastic.out(1, 0.3)"})
        .from('.settings_wrapper', {duration: 1, yPercent: 250, ease: "back.out(1.7)"})

    function close_error_message(event) {
        gsap.to('.alert', { duration: 0.5, ease: "slow(0.7, 0.7, false)", opacity: 0, xPercent: 100 })
        setTimeout(() => {
            document.querySelector('#error_message').style.display = 'none';
        }, 500)
    }

{% endblock %}